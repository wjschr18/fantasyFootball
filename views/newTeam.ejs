<!DOCTYPE html>
<html>
  <%- include('./header'); -%>
  <%- include('./navs'); -%>
    <h2>Team Management</h2>
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">Create A New Team</h5>
        <p class="card-text">Want to join the league? Awesome! Get started by entering your team name below</p>
        <input type="text" class="pr-3" id="teamName" name="id" value="">
        <button id="create" class="btn btn-primary ml-2">Create Your Team</button>
      </div>
    </div>
    <script
      src="https://code.jquery.com/jquery-3.4.1.min.js"
      integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
      crossorigin="anonymous">
    </script>
    <script>
      $('.active').removeClass('active');
      $('#newTeam').addClass('active');

      $('#create').on('click', function(event){
        event.preventDefault();
        const form = $('#teamName');
        const teamName = form.serialize();
        $('#teamName').val('');
        $.ajax({method: 'post', url: '/teams/new', data: `${teamName}&score=0`})
          .done(response.render('/viewTeam'))
          .fail(console.log(error.responseText));
        $.ajax({method: 'put', url: `/user/${user._id}`, data: `teams=${user.teams.push(form.val())}`})
          .done(response => console.log(response))
          .fail(console.log(error.responseText));
        console.log(`${user._id}, ${user.teams}`);
      });

    </script>
</html>
