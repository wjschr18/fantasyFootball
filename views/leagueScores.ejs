<!DOCTYPE html>
<html>
  <%- include('./header'); -%>
  <%- include('./navs'); -%>
  <%_ if (!user) { -%>
    <%- include('./login'); -%>
  <%_ } else { -%>
  <h2>League Scores</h2>
  <table class="table table-striped">
    <thead class="thead-dark">
      <tr>
        <th scope="col">Number</th>
        <th scope="col">Team</th>
        <th scope="col">Score</th>
      </tr>
    </thead>
    <tbody>
      <%_ let counter = 1;-%>
      <%_ let hold = 0;-%>
      <%_ let scores = [];-%>
      <%_ let holder = [];-%>
      <%_ let c = 0;-%>
      <%_ for (const team of teams) { -%>
        <%_ holder.push(1);-%>
        <%_ if (team.score != 0) { -%>
            <%_ let counterdos = 1;-%>
            <%_ hold = team.score;-%>
            <%_ scores.push(hold);-%>
            <%_scores.sort((a,b)=>b-a);-%>
            <%_ for (const s of scores) { -%>
              <%_ if (team.score === s) { -%>
                <tr>
                  <th scope="row"><%=counterdos++-%></th>
                  <td><%= team._id-%></td>
                  <td><%= team.score-%></td>
                </tr>
            <%_ } -%>
          <%_ } -%>
        <%_ } -%>
      <%_ } for (const team of teams) { -%>
        <%_ if (team.score === 0) { -%>
          <%_ c++;-%>
          <%_ if (holder.length === c) { -%>
            <tr>
              <th scope="row"><%=counter++-%></th>
              <td><%= team._id-%></td>
              <td><%= team.score-%></td>
            </tr>
        <%_ } -%>
      <%_ } -%>
    <%_ } -%>
    </tbody>
  </table>
<%_ } -%>
<script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<script>
  $('.active').removeClass('active');
  $('#leagueScores').addClass('active');
</script>
</html>
