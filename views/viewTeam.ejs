<!DOCTYPE html>
<html>
  <%- include('./header'); -%>
  <%- include('./navs'); -%>
  <%_ if (!user) { -%>
    <%- include('./login'); -%>
  <%_ } else { -%>
          <h2 id="title">Your Team</h2>
          <h5 id="instructions" class= "mt-4">Welcome to the your team page! Enter your team name below to view and update your team's score.</p>
          <input type="text" id="team">
          <button id="submit">Go</button>

            <h3 id="lastScore">Your Previous Score: </h3>
            <h3 id="newScore" class="mt-4">Enter Your Players' Stats From This Week to Get Updated Team Score: </h3>
            <h4 id="qbLabel" class="mt-4">QB Stats:</h4>
            <h5 id="qbYdsL" class="ml-4"> Passing Yards: </h5>
            <input type="text" id="qbT1" class="ml-4">
            <h5 id="qbTdsL" class="ml-4 mt-2"> Passing TDs: </h5>
            <input type="text" id="qbT2" class="ml-4">
            <h4 id="rbLabel" class="mt-3">RB Stats:</h4>
            <h5 id="rbYdsL" class="ml-4"> Rushing Yards: </h5>
            <input type="text" id="rbT1" class="ml-4">
            <h5 id="rbTdsL" class="ml-4 mt-2"> Rushing TDs: </h5>
            <input type="text" id="rbT2" class="ml-4">
            <h4 id="wrLabel" class="mt-3">WR Stats:</h4>
            <h5 id="wrYdsL" class="ml-4"> Receiving Yards: </h5>
            <input type="text" id="wrT1" class="ml-4">
            <h5 id="wrTdsL" class="ml-4 mt-2"> Recieving TDs: </h5>
            <input type="text" id="wrT2" class="ml-4">
            <h4 id="teLabel" class="mt-3">TE Stats:</h4>
            <h5 id="teYdsL" class="ml-4"> Receiving Yards: </h5>
            <input type="text" id="teT1" class="ml-4">
            <h5 id="teTdsL" class="ml-4 mt-2"> Receiving TDs: </h5>
            <input type="text" id="teT2" class="ml-4">
            <h5 id="filler">________________________</h5>
            <button id="submit2" class="mt-2">Submit Stats</button>

            <%_ } -%> <!-- for login.ejs -->
            <script
              src="https://code.jquery.com/jquery-3.4.1.min.js"
              integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
              crossorigin="anonymous">
            </script>
            <script>
              $('.active').removeClass('active');
              $('#myTeam').addClass('active');
            </script>
            <script>
              $('#lastScore').hide();
              $('#newScore').hide();
              $('#qbLabel').hide();
              $('#rbLabel').hide();
              $('#wrLabel').hide();
              $('#teLabel').hide();
              $('#qbYdsL').hide();
              $('#qbTdsL').hide();
              $('#rbYdsL').hide();
              $('#rbTdsL').hide();
              $('#wrYdsL').hide();
              $('#wrTdsL').hide();
              $('#teYdsL').hide();
              $('#teTdsL').hide();
              $('#qbT1').hide();
              $('#qbT2').hide();
              $('#rbT1').hide();
              $('#rbT2').hide();
              $('#wrT1').hide();
              $('#wrT2').hide();
              $('#teT1').hide();
              $('#teT2').hide();
              $('#filler').hide();
              $('#submit2').hide();

              $('#submit').on('click', function(event) {
                event.preventDefault();
                $('#title').remove();
                $('#instructions').remove();
                $('#text').remove();
                $('#submit').remove();
                $('#lastScore').show();
                $('#newScore').show();
                $('#qbLabel').show();
                $('#rbLabel').show();
                $('#wrLabel').show();
                $('#teLabel').show();
                $('#qbYdsL').show();
                $('#qbTdsL').show();
                $('#rbYdsL').show();
                $('#rbTdsL').show();
                $('#wrYdsL').show();
                $('#wrTdsL').show();
                $('#teYdsL').show();
                $('#teTdsL').show();
                $('#qbT1').show();
                $('#qbT2').show();
                $('#rbT1').show();
                $('#rbT2').show();
                $('#wrT1').show();
                $('#wrT2').show();
                $('#teT1').show();
                $('#teT2').show();
                $('#filler').show();
                $('#submit2').show();
              });
              </script>
              <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
              <script>
              $('#submit2').on('click', function(event){
                //const form = $('#score');
                const qtotal = $('#qbT1'); // + $('#qbT2').value;
                const qbscore = qtotal.serialize();
                const rtotal = $('#rbT1') + $('#rbT2');
                const wrtotal = $('#wrT1') + $('#wrT2');
                const tetotal = $('#teT1') + $('#teT2');
                const total = qtotal + rtotal + wrtotal + tetotal;
                event.preventDefault();
                $.ajax({method: 'post', url: '/teams/score', data: `score=${qbscore}`})
                  .done(response.render(form.val()))
                  .fail(console.log(error.responseText));
              });

            </script>
        </div>
      </div>
</html>
